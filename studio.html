<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContentFlow Pro - å…¨èƒ½åˆ›ä½œå·¥ä½œå®¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #05070a; }
        .glass-card { background: rgba(17, 25, 40, 0.75); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gradient-btn { background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); transition: all 0.3s ease; }
        .gradient-btn:hover { filter: brightness(1.2); transform: translateY(-1px); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .ai-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="text-slate-200 min-h-screen">

    <!-- ä¾§è¾¹æ  -->
    <aside class="w-72 fixed h-full bg-[#0d1117] border-r border-white/5 flex flex-col z-30">
        <div class="p-8">
            <h1 class="text-white text-2xl font-black tracking-tighter flex items-center gap-2">
                <i class="fas fa-brain text-indigo-500"></i> ContentFlow <span class="text-indigo-500 text-xs italic bg-indigo-500/10 px-2 py-0.5 rounded">ULTIMATE</span>
            </h1>
        </div>

        <nav class="flex-grow px-4 space-y-2">
            <button onclick="switchTab('ideas')" class="w-full flex items-center gap-3 px-4 py-3 bg-indigo-600/10 text-indigo-400 rounded-xl border border-indigo-500/20">
                <i class="fas fa-lightbulb"></i> <span class="text-sm font-bold">çµæ„Ÿä¸é€‰é¢˜</span>
            </button>
            <button onclick="switchTab('ai-studio')" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition-all">
                <i class="fas fa-wand-magic-sparkles"></i> <span class="text-sm">AI åˆ›ä½œå®éªŒå®¤</span>
            </button>
            <button onclick="switchTab('finance')" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition-all">
                <i class="fas fa-chart-pie"></i> <span class="text-sm">æ”¶ç›Šä¸æŠ•æ”¾ç»Ÿè®¡</span>
            </button>
        </nav>

        <div class="p-6 space-y-4">
            <div class="bg-indigo-900/20 border border-indigo-500/30 p-4 rounded-2xl">
                <p class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-2">API å¼•æ“çŠ¶æ€</p>
                <input type="password" id="api-key" placeholder="Gemini API Key..." class="w-full bg-black/40 border border-white/10 rounded-lg p-2 text-[10px] outline-none focus:border-indigo-500">
                <p class="text-[8px] text-slate-500 mt-2 italic">æ³¨ï¼šæœ¬åœ°åŠ å¯†å­˜å‚¨ï¼Œä»…ç”¨äºè°ƒç”¨ AI</p>
            </div>
            <button onclick="showActivationModal()" id="activation-btn" class="w-full py-3 bg-white text-black text-xs font-black rounded-xl hover:bg-slate-200 transition-all uppercase tracking-tighter">è§£é”å•†ä¸šå…¨èƒ½ç‰ˆ</button>
        </div>
    </aside>

    <!-- ä¸»ç•Œé¢ -->
    <main class="ml-72 p-10">
        
        <!-- Tab: çµæ„Ÿä¸é€‰é¢˜ -->
        <section id="tab-ideas" class="tab-content active">
            <header class="flex justify-between items-end mb-10">
                <div>
                    <h2 class="text-4xl font-black text-white tracking-tight mb-2 italic">é€‰é¢˜çœ‹æ¿</h2>
                    <p class="text-slate-500 text-sm">ä»Šæ—¥å·²æˆåŠŸæ•æ‰ <span id="idea-count" class="text-indigo-500 font-bold">0</span> ä¸ªçˆ†æ¬¾æ½œè´¨é€‰é¢˜</p>
                </div>
                <button onclick="openIdeaModal()" class="gradient-btn px-8 py-3 rounded-2xl font-bold text-white shadow-lg shadow-indigo-500/20">
                    <i class="fas fa-plus"></i> æ–°å¢é€‰é¢˜
                </button>
            </header>

            <div class="bg-white/5 rounded-3xl border border-white/5 overflow-hidden glass-card">
                <table class="w-full text-left">
                    <thead class="bg-white/[0.02]">
                        <tr>
                            <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest">çŠ¶æ€</th>
                            <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest">æ ‡é¢˜å†…å®¹</th>
                            <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest">é¢„å®šå¹³å°</th>
                            <th class="px-8 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="idea-tbody" class="divide-y divide-white/5"></tbody>
                </table>
            </div>
        </section>

        <!-- Tab: AI åˆ›ä½œå®éªŒå®¤ -->
        <section id="tab-ai-studio" class="tab-content">
            <h2 class="text-4xl font-black text-white tracking-tight mb-8">AI åˆ›ä½œå®éªŒå®¤</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- AI è§†è§‰ï¼šå›¾ç‰‡ç”Ÿæˆ -->
                <div class="glass-card p-8 rounded-3xl space-y-6">
                    <div class="flex justify-between items-center">
                        <h3 class="font-bold text-xl flex items-center gap-2"><i class="fas fa-image text-purple-400"></i> AI çˆ†æ¬¾å°é¢ç”Ÿæˆ</h3>
                        <span class="text-[10px] bg-purple-500/10 text-purple-400 px-2 py-1 rounded">Imagen 4.0</span>
                    </div>
                    <textarea id="img-prompt" placeholder="æè¿°ä½ æƒ³è¦çš„ç”»é¢ï¼Œä¾‹å¦‚ï¼šä¸€ä¸ªæç®€ä¸»ä¹‰é£æ ¼çš„è‡ªåª’ä½“åšä¸»å·¥ä½œå°ï¼Œèµ›åšæœ‹å…‹éœ“è™¹ç¯å…‰..." class="w-full h-32 bg-black/30 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-purple-500"></textarea>
                    <button onclick="generateImage()" id="gen-img-btn" class="w-full py-4 gradient-btn rounded-2xl font-black">å¼€å§‹ç”Ÿæˆè§†è§‰ç´ æ</button>
                    <div id="img-container" class="aspect-video bg-black/40 rounded-2xl flex items-center justify-center border border-dashed border-white/10 overflow-hidden">
                        <p class="text-slate-600 text-xs italic">ç”Ÿæˆçš„å›¾ç‰‡å°†åœ¨æ­¤æ˜¾ç¤º</p>
                    </div>
                </div>

                <!-- AI å¬è§‰ï¼šæ–‡å­—è½¬è¯­éŸ³ -->
                <div class="glass-card p-8 rounded-3xl space-y-6">
                    <div class="flex justify-between items-center">
                        <h3 class="font-bold text-xl flex items-center gap-2"><i class="fas fa-microphone text-blue-400"></i> æ–‡å­—è½¬è¯­éŸ³ (TTS)</h3>
                        <span class="text-[10px] bg-blue-500/10 text-blue-400 px-2 py-1 rounded">åŸç”Ÿå¼•æ“</span>
                    </div>
                    <textarea id="tts-text" placeholder="è¾“å…¥ä½ æƒ³è½¬æˆè¯­éŸ³çš„æ–‡æ¡ˆå†…å®¹..." class="w-full h-32 bg-black/30 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-blue-500"></textarea>
                    <div class="grid grid-cols-2 gap-4">
                        <select id="voice-select" class="bg-black/40 border border-white/10 rounded-xl p-3 text-xs outline-none focus:border-blue-500 text-white"></select>
                        <button onclick="speakText()" class="py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2">
                            <i class="fas fa-play"></i> ç«‹å³è¯•å¬
                        </button>
                    </div>
                    <p class="text-[10px] text-slate-500"><i class="fas fa-info-circle"></i> æç¤ºï¼šä¸åŒæµè§ˆå™¨æ”¯æŒçš„è¯­éŸ³åŒ…ä¸åŒï¼Œæ¨èä½¿ç”¨ Chrome è·å–æœ€ä½³æ•ˆæœã€‚</p>
                </div>
            </div>
        </section>

        <!-- Tab: æ”¶ç›Šä¸æŠ•æ”¾ç»Ÿè®¡ -->
        <section id="tab-finance" class="tab-content">
            <h2 class="text-4xl font-black text-white tracking-tight mb-8">è´¢åŠ¡ä¸æŠ•æ”¾çœ‹æ¿</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="glass-card p-8 rounded-3xl">
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1">æ€»é¢„ä¼°æ”¶ç›Š</p>
                    <p class="text-3xl font-black text-white italic">Â¥ 0.00</p>
                </div>
                <div class="glass-card p-8 rounded-3xl">
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1">æŠ•æ”¾ ROI</p>
                    <p class="text-3xl font-black text-emerald-400 italic">0.0</p>
                </div>
                <div class="glass-card p-8 rounded-3xl">
                    <p class="text-slate-500 text-[10px] font-bold uppercase tracking-widest mb-1">å•†å•è½¬åŒ–ç‡</p>
                    <p class="text-3xl font-black text-blue-400 italic">0%</p>
                </div>
            </div>
            <div class="glass-card p-20 rounded-[3rem] text-center border-dashed border-2 border-white/5">
                <i class="fas fa-lock text-slate-700 text-4xl mb-6"></i>
                <h4 class="text-xl font-bold text-white mb-2">å•†ä¸šç‰ˆç»Ÿè®¡æ¨¡å—å·²é”å®š</h4>
                <p class="text-slate-500 text-sm mb-8">è´­ä¹°æ¿€æ´»ç ä»¥è§£é”æ·±åº¦æ•°æ®åˆ†æã€åˆ©æ¶¦è‡ªåŠ¨åŒ–è®¡ç®—ç­‰ Pro åŠŸèƒ½</p>
                <button onclick="showActivationModal()" class="px-10 py-4 bg-indigo-600 rounded-2xl font-black hover:bg-indigo-500 transition-all">ç«‹å³è”ç³»å®¢æœæ¿€æ´»</button>
            </div>
        </section>
    </main>

    <!-- æ¨¡æ€æ¡†ï¼šæ–°å¢é€‰é¢˜ -->
    <div id="idea-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md z-[100] hidden flex items-center justify-center p-6">
        <div class="bg-[#0d1117] w-full max-w-4xl rounded-[2.5rem] border border-white/10 shadow-2xl overflow-hidden flex flex-col md:flex-row">
            <div class="p-10 w-full md:w-1/2 border-r border-white/5">
                <h3 class="text-2xl font-black mb-8 text-white">æ‰‹åŠ¨å½•å…¥</h3>
                <form id="idea-form" class="space-y-6">
                    <div>
                        <label class="text-[10px] font-bold text-slate-500 uppercase ml-1">è§†é¢‘/å›¾æ–‡æ ‡é¢˜</label>
                        <input type="text" id="idea-title" required class="w-full bg-black/40 border border-white/10 rounded-2xl p-4 mt-2 outline-none focus:border-indigo-500 text-white">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <select id="idea-platform" class="bg-black/40 border border-white/10 rounded-2xl p-4 outline-none text-white text-sm">
                            <option>å°çº¢ä¹¦</option><option>æŠ–éŸ³</option><option>Bilibili</option><option>è§†é¢‘å·</option>
                        </select>
                        <select id="idea-priority" class="bg-black/40 border border-white/10 rounded-2xl p-4 outline-none text-white text-sm">
                            <option>ğŸ”¥ é«˜çˆ†æ¬¾</option><option>âš¡ ä¸­è§„ä¸­çŸ©</option><option>ğŸ“ å¤‡é€‰åº“</option>
                        </select>
                    </div>
                    <button type="submit" class="w-full py-4 gradient-btn rounded-2xl font-black text-white uppercase tracking-widest shadow-xl shadow-indigo-500/10">ç¡®è®¤å­˜å…¥åº“</button>
                </form>
            </div>
            <div class="p-10 w-full md:w-1/2 bg-indigo-900/10">
                <h3 class="text-2xl font-black mb-8 text-indigo-400 flex items-center gap-2">
                    <i class="fas fa-wand-magic-sparkles text-sm"></i> AI çˆ†æ¬¾ç”Ÿæˆå™¨
                </h3>
                <div class="space-y-4">
                    <div class="relative">
                        <input type="text" id="ai-keyword" placeholder="è¾“å…¥æ ¸å¿ƒè¯ (å¦‚: ç¨‹åºå‘˜å‰¯ä¸š)" class="w-full bg-black/60 border border-white/10 rounded-2xl p-4 text-sm outline-none focus:border-indigo-500 pr-16 text-white">
                        <button onclick="aiGenerateThemes()" id="ai-gen-btn" class="absolute right-3 top-3 px-3 py-1 bg-indigo-600 rounded-lg text-[10px] font-bold text-white">é­”æ³•</button>
                    </div>
                    <div id="ai-results" class="h-64 overflow-y-auto pr-2 no-scrollbar space-y-2">
                        <div class="h-full flex flex-col items-center justify-center text-slate-600 text-[11px] italic">
                            <i class="fas fa-sparkles mb-2"></i>
                            ç­‰å¾…æ–½å±•é­”æ³•...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¿€æ´»æ¨¡æ€æ¡† -->
    <div id="activation-modal" class="fixed inset-0 bg-black/90 backdrop-blur-xl z-[200] hidden flex items-center justify-center p-6 text-center">
        <div class="max-w-sm w-full space-y-8">
            <div class="w-24 h-24 bg-indigo-600 rounded-[2rem] flex items-center justify-center mx-auto shadow-2xl shadow-indigo-500/40">
                <i class="fas fa-shield-halved text-white text-4xl"></i>
            </div>
            <div>
                <h3 class="text-3xl font-black text-white mb-2 tracking-tighter italic uppercase">è§£é”ä¸“ä¸šç‰ˆåŠŸèƒ½</h3>
                <p class="text-slate-500 text-sm leading-relaxed">è·å¾—æ·±åº¦è´¢åŠ¡ç»Ÿè®¡ã€å¤šè®¾å¤‡æ•°æ®åŒæ­¥ä»¥åŠæ— é™æ¬¡ Imagen 4.0 é«˜çº§ç”Ÿå›¾èƒ½åŠ›ã€‚</p>
            </div>
            <input type="text" id="license-key" placeholder="è¾“å…¥æˆæƒåºåˆ—å· (é»˜è®¤: PRO-2025-FLOW)" class="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-center text-white font-mono outline-none focus:border-indigo-500">
            <div class="space-y-3">
                <button onclick="verifyLicense()" class="w-full py-4 gradient-btn rounded-2xl font-black text-white">ç«‹å³æ¿€æ´»ç³»ç»Ÿ</button>
                <button onclick="showActivationModal()" class="text-slate-600 text-xs hover:text-white transition-colors">æš‚æ—¶ä¸ï¼Œå…ˆçœ‹çœ‹åŸºç¡€ç‰ˆ</button>
            </div>
            <p class="text-[10px] text-slate-700 uppercase font-black">Powered by ContentFlow.ai</p>
        </div>
    </div>

    <script>
        // --- æ ¸å¿ƒé€»è¾‘ ---
        let ideas = JSON.parse(localStorage.getItem('cf_pro_ideas') || '[]');
        let isPro = localStorage.getItem('cf_pro_active') === 'true';
        let voices = [];

        function init() {
            if(isPro) applyProStyles();
            renderIdeas();
            setupVoices();
            // åŠ è½½ API Key
            document.getElementById('api-key').value = localStorage.getItem('cf_pro_apikey') || '';
        }

        // Tab åˆ‡æ¢
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            // UI æ›´æ–°
            document.querySelectorAll('nav button').forEach(btn => {
                btn.className = "w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition-all";
            });
            event.currentTarget.className = "w-full flex items-center gap-3 px-4 py-3 bg-indigo-600/10 text-indigo-400 rounded-xl border border-indigo-500/20";
        }

        // --- æ–‡å­—è½¬è¯­éŸ³ (TTS) ---
        function setupVoices() {
            const synth = window.speechSynthesis;
            const select = document.getElementById('voice-select');
            
            const loadVoices = () => {
                voices = synth.getVoices();
                select.innerHTML = '';
                voices.forEach((voice, i) => {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    if(voice.lang.includes('zh')) option.selected = true;
                    select.appendChild(option);
                });
            };
            
            if (synth.onvoiceschanged !== undefined) synth.onvoiceschanged = loadVoices;
            loadVoices();
        }

        function speakText() {
            const text = document.getElementById('tts-text').value;
            if(!text) return alert('è¯·è¾“å…¥æ–‡æ¡ˆ');
            const synth = window.speechSynthesis;
            const utter = new SpeechSynthesisUtterance(text);
            utter.voice = voices[document.getElementById('voice-select').value];
            synth.speak(utter);
        }

        // --- AI å›¾ç‰‡ç”Ÿæˆ (Imagen 4.0 æ¨¡å¼) ---
        async function generateImage() {
            const prompt = document.getElementById('img-prompt').value;
            const key = document.getElementById('api-key').value;
            const btn = document.getElementById('gen-img-btn');
            const container = document.getElementById('img-container');

            if(!prompt) return alert('è¯·è¾“å…¥ç”»é¢æè¿°');
            if(!key) return alert('è¯·åœ¨ä¾§è¾¹æ å¡«å…¥ API Key');

            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> æ­£åœ¨æ„æ€ç”»é¢...';
            container.innerHTML = '<div class="ai-pulse text-indigo-400 text-xs italic">AI æ­£åœ¨æ ¹æ®æè¿°ç»˜åˆ¶çˆ†æ¬¾å°é¢...</div>';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${key}`, {
                    method: 'POST',
                    body: JSON.stringify({ instances: { prompt: prompt }, parameters: { sampleCount: 1 } })
                });
                const result = await response.json();
                const base64 = result.predictions?.[0]?.bytesBase64Encoded;
                if(!base64) throw new Error('ç”Ÿæˆå¤±è´¥');
                
                container.innerHTML = `<img src="data:image/png;base64,${base64}" class="w-full h-full object-cover rounded-2xl shadow-2xl">`;
            } catch (err) {
                container.innerHTML = `<p class="text-red-400 text-xs italic">ç”Ÿæˆå¤±è´¥ã€‚åŸå› ï¼šAPI Key æ— æ•ˆæˆ–é¢åº¦ä¸è¶³ã€‚</p>`;
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'å¼€å§‹ç”Ÿæˆè§†è§‰ç´ æ';
            }
        }

        // --- AI é€‰é¢˜ç”Ÿæˆ ---
        async function aiGenerateThemes() {
            const keyword = document.getElementById('ai-keyword').value;
            const key = document.getElementById('api-key').value;
            const resultsDiv = document.getElementById('ai-results');
            const btn = document.getElementById('ai-gen-btn');

            if(!keyword) return;
            if(!key) return alert('è¯·å…ˆè¾“å…¥ä¾§è¾¹æ çš„ API Key');

            btn.disabled = true;
            resultsDiv.innerHTML = '<div class="h-full flex items-center justify-center"><i class="fas fa-spinner fa-spin text-indigo-500"></i></div>';

            const userQuery = `ä½œä¸ºä¸€ä¸ªçˆ†æ¬¾å¯¼å¸ˆï¼Œè¯·é’ˆå¯¹å…³é”®è¯â€œ${keyword}â€ç»™5ä¸ªæå…¶å¸å¼•çœ¼çƒã€èƒ½åœ¨å°çº¢ä¹¦å’ŒæŠ–éŸ³è·å¾—é«˜è½¬åŒ–çš„æ ‡é¢˜ã€‚ç›´æ¥ç»™æ ‡é¢˜åˆ—è¡¨ï¼Œæ¯è¡Œä¸€ä¸ªã€‚`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${key}`, {
                    method: 'POST',
                    body: JSON.stringify({ contents: [{ parts: [{ text: userQuery }] }] })
                });
                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                if(!text) throw new Error();

                const titles = text.split('\n').filter(t => t.trim());
                resultsDiv.innerHTML = '';
                titles.forEach(title => {
                    const cleanTitle = title.replace(/^\d+\.\s*/, '');
                    const div = document.createElement('div');
                    div.className = "p-4 bg-white/5 border border-white/5 rounded-2xl hover:border-indigo-500/40 cursor-pointer transition-all flex justify-between items-center group";
                    div.innerHTML = `<span class="text-xs text-slate-300 font-bold">${cleanTitle}</span><i class="fas fa-arrow-left text-indigo-400 opacity-0 group-hover:opacity-100 transition-all"></i>`;
                    div.onclick = () => document.getElementById('idea-title').value = cleanTitle;
                    resultsDiv.appendChild(div);
                });
            } catch (err) {
                resultsDiv.innerHTML = '<p class="text-[10px] text-red-500 text-center py-10">é­”æ³•å¤±æ•ˆã€‚è¯·æ£€æŸ¥ API Keyã€‚</p>';
            } finally {
                btn.disabled = false;
            }
        }

        // --- æ¿€æ´»ä¸ Pro é€»è¾‘ ---
        function showActivationModal() { document.getElementById('activation-modal').classList.toggle('hidden'); }

        function verifyLicense() {
            const key = document.getElementById('license-key').value;
            if(key === "PRO-2025-FLOW") {
                localStorage.setItem('cf_pro_active', 'true');
                isPro = true;
                applyProStyles();
                showActivationModal();
                alert('æ¿€æ´»æˆåŠŸï¼å·²è§£é”å…¨éƒ¨å•†ä¸šåŠŸèƒ½ã€‚');
            } else { alert('æˆæƒç æ— æ•ˆã€‚'); }
        }

        function applyProStyles() {
            document.getElementById('activation-btn').innerText = "å•†ä¸šä¸“ä¸šç‰ˆå·²æ¿€æ´»";
            document.getElementById('activation-btn').className = "w-full py-3 bg-indigo-600 text-white text-xs font-black rounded-xl cursor-default";
            document.querySelectorAll('.locked-overlay').forEach(el => el.remove());
        }

        // --- çµæ„Ÿåº“åŸºç¡€åŠŸèƒ½ ---
        function openIdeaModal() { document.getElementById('idea-modal').classList.remove('hidden'); }
        function closeIdeaModal() { document.getElementById('idea-modal').classList.add('hidden'); }

        document.getElementById('idea-form').onsubmit = (e) => {
            e.preventDefault();
            const idea = {
                id: Date.now(),
                title: document.getElementById('idea-title').value,
                platform: document.getElementById('idea-platform').value,
                priority: document.getElementById('idea-priority').value,
                status: 'æ•è·ä¸­'
            };
            ideas.unshift(idea);
            saveAndRender();
            closeIdeaModal();
            e.target.reset();
        };

        function updateStatus(id) {
            const idea = ideas.find(i => i.id === id);
            const statuses = ['æ•è·ä¸­', 'è„šæœ¬æ’°å†™', 'æ‹æ‘„æ‹æ‘„', 'åæœŸå‰ªè¾‘', 'å·²ä¸Šçº¿'];
            idea.status = statuses[(statuses.indexOf(idea.status) + 1) % statuses.length];
            saveAndRender();
        }

        function deleteIdea(id) {
            if(confirm('ç¡®å®šæŠ¹é™¤è¯¥é€‰é¢˜ï¼Ÿ')) { ideas = ideas.filter(i => i.id !== id); saveAndRender(); }
        }

        function saveAndRender() {
            localStorage.setItem('cf_pro_ideas', JSON.stringify(ideas));
            localStorage.setItem('cf_pro_apikey', document.getElementById('api-key').value);
            renderIdeas();
        }

        function renderIdeas() {
            const tbody = document.getElementById('idea-tbody');
            tbody.innerHTML = '';
            ideas.forEach(idea => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-white/[0.01] transition-all";
                tr.innerHTML = `
                    <td class="px-8 py-6"><button onclick="updateStatus(${idea.id})" class="px-3 py-1 bg-indigo-500/10 border border-indigo-500/20 rounded-lg text-[10px] text-indigo-400 font-bold uppercase">${idea.status}</button></td>
                    <td class="px-8 py-6 font-bold text-white text-sm">${idea.title}</td>
                    <td class="px-8 py-6 text-center"><span class="px-2 py-1 bg-slate-900 rounded text-[10px] text-slate-500 border border-white/5">${idea.platform}</span></td>
                    <td class="px-8 py-6 text-right"><button onclick="deleteIdea(${idea.id})" class="text-slate-700 hover:text-red-500"><i class="fas fa-trash"></i></button></td>
                `;
                tbody.appendChild(tr);
            });
            document.getElementById('idea-count').innerText = ideas.length;
        }

        // ç›‘å¬ API Key å˜åŒ–
        document.getElementById('api-key').onchange = (e) => localStorage.setItem('cf_pro_apikey', e.target.value);

        init();
    </script>
</body>
</html>